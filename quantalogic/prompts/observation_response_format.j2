# Analysis and Next Action Decision Point

üìä Progress: Iteration {{ iteration }}/{{ max_iterations }}

## Global Task summary:
```

{{ task_to_solve_summary }}```

## Available Resources
üõ†Ô∏è Tools:
{{ tools_prompt }}

üì¶ Variables:
{{ variables_prompt }}

## Your Task
1. Analyze the execution result and progress, formalize if the current step is solved according to the task.
2. Update the <ongoing_plan> tag
3. Determine the most effective next step
4. Select exactly ONE tool from the available list ONLY.
5. Utilize variable interpolation where needed
6. Always use the content of the variable instead of the variable name as a string.
7. Do not over iterate the plan

## Response Requirements
Provide TWO markdown-formatted XML blocks:
1. Your analysis of the progression resulting from the execution of the tool in <thinking> tags,
  - include the <ongoing_plan> tag
  - do not include <context_analysis/>
2. Your tool execution plan in <tool_name> tags

## Last executed action result
Last executed tool {{ last_executed_tool }} Execution Result:

<{{ variable_name }}>
{{ response_display }}
</{{ variable_name }}>

## Response Format
```xml
<thinking>
[Detailed analysis of progress, ongoing plan and reasoning only for next step if not completed yet in <ongoing_plan> tag]
</thinking>
```

```xml
<action>
<selected_tool_name>
[Precise instruction for tool execution]
</selected_tool_name>
</action>
```

‚ö†Ô∏è Important:
- Respond ONLY with the three XML blocks
- No additional commentary
- Always capture and update the progress of the plan with checks icons for completed steps.‚úÖ 
- When all the steps are completed in the <ongoing_plan> tag, use <action><task_complete><answer>...</answer></task_complete><action> tag to indicate task completion, don't go wilde for nothing.
- If previous step failed, revise approach and plan.
- Use interpolated variables ($variable_name$) where required in tool calls, to minimize token usage, if possible
- Strictly follow the required arguments for each tool as defined in system prompt
- Never return interpolated variables ($variable_name$)in the task complete, always return the content of the variable.
- Never save interpolated variables ($variable_name$)in the files, always save the content of the variable.
- Utilize <action><task_complete><answer>...</answer></task_complete><action> to indicate task completion.
- ‚úÖ Return complete, usable results well structured.
- ‚úÖ Give detailed and relevant solution or information
- ‚úÖ Structure content in clear sections using markdown (###, ####)
