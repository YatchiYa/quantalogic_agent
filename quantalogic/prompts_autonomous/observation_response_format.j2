# Task Execution Analysis

ğŸ“Š Iteration: {{ iteration }}/{{ max_iterations }}
ğŸ¤– Mode: [Simple|Standard|Complex|Autonomous]

### Current Task
```
{{ task_to_solve_summary }}
```

### Task Complexity
ğŸ¯ Level: [Simple|Standard|Complex|Autonomous]
ğŸ“ˆ Progress: {{ progress_percentage }}%
â±ï¸ Time Elapsed: {{ elapsed_time }}
ğŸ”„ Phase: [Current Phase Number]/[Total Phases]

### Available Resources
ğŸ› ï¸ Tools: {{ tools_prompt }}
ğŸ“¦ State: {{ variables_prompt }}

### Last Action Result
Tool: {{ last_executed_tool }}
<{{ variable_name }}>
{{ response_display }}
</{{ variable_name }}>

### Response Requirements

[IF Autonomous Mode]
Provide comprehensive execution in TWO blocks:

1. Analysis Block (<thinking>):
   â€¢ Update phase and step tracking
   â€¢ Validate action results
   â€¢ Plan next steps autonomously
   â€¢ Track error states
   â€¢ Handle retries automatically

2. Action Block (<action>):
   â€¢ Execute next planned step
   â€¢ Use precise parameters
   â€¢ Include validation criteria
   â€¢ Track progress metrics

[ELSE IF Simple Task]
Provide focused solution in TWO blocks:

1. Analysis Block (<thinking>):
   â€¢ Track tool call count (max 2)
   â€¢ Validate action result
   â€¢ Confirm completion status
   â€¢ If not complete after 2 calls:
     - Escalate to standard complexity
     - Request user guidance

2. Action Block (<action>):
   â€¢ Execute precise tool call
   â€¢ Use clear parameters
   â€¢ Include completion criteria

[ELSE]
Provide detailed analysis in TWO blocks:

1. Analysis Block (<thinking>):
   â€¢ Update progress tracking
   â€¢ Evaluate action results
   â€¢ Determine next step
   â€¢ Track completion status
   â€¢ Handle any errors

2. Action Block (<action>):
   â€¢ Select ONE tool
   â€¢ Use variable interpolation
   â€¢ Provide precise parameters

### Response Format

[IF Autonomous Mode]
```xml
<thinking>
  <task_analysis>
    â€¢ ğŸ“‹ Goal: [Clear objective]
    â€¢ ğŸ¯ Success Criteria: [Measurable outcomes]
    â€¢ ğŸ¤– Mode: Autonomous
    â€¢ ğŸ“ˆ Phase: [Current/Total]
  </task_analysis>

  <execution_plan>
    â€¢ ğŸ“ˆ Current Phase: [Description]
    â€¢ ğŸ¯ Current Step: [Step Details]
    â€¢ ğŸ“ Next Steps: [Outline]
  </execution_plan>

  <progress_tracker>
    â€¢ âœ… Completed: [Steps with outcomes]
    â€¢ ğŸ”„ Current: [Step details]
    â€¢ ğŸ“Š Progress: [Phase: X/Y, Overall: Z%]
    â€¢ â±ï¸ Duration: [Time per phase]
  </progress_tracker>

  <execution_state>
    â€¢ ğŸ”„ Last Result: [Outcome]
    â€¢ âš¡ Next Action: [Plan]
    â€¢ âš ï¸ Failures: [Count/Type]
    â€¢ ğŸ” Validation: [Status]
  </execution_state>
</thinking>

<action>
<tool_name>
  [Parameters]
</tool_name>
</action>
```

[ELSE IF Simple Task]
```xml
<thinking>
  <progress_tracker>
    â€¢ ğŸ¯ Task Type: Simple
    â€¢ ğŸ”„ Tool Calls: [N/2]
    â€¢ âœ… Previous Result: [Success/Failure]
    â€¢ ğŸ“Š Status: [In Progress/Need Escalation]
  </progress_tracker>

  <quick_assessment>
    â€¢ âœ… Result: [Outcome]
    â€¢ ğŸ“Š Status: [Complete/Pending]
    â€¢ âš¡ Next: [Action/Complete/Escalate]
  </quick_assessment>
</thinking>

<action>
<tool_name>
  [Parameters]
</tool_name>
</action>
```

[ELSE]
```xml
<thinking>
  <progress_tracker>
    â€¢ âœ… Completed: [Steps]
    â€¢ ğŸ¯ Current: [Step]
    â€¢ ğŸ“ Pending: [Steps]
    â€¢ ğŸ“Š Progress: [X/Y]
  </progress_tracker>

  <execution_state>
    â€¢ ğŸ”„ Last Result: [Outcome]
    â€¢ âš¡ Next Action: [Plan]
    â€¢ ğŸ’¾ State Update: [Changes]
    â€¢ âš ï¸ Issues: [If any]
  </execution_state>
</thinking>

<action>
<tool_name>
  [Parameters]
</tool_name>
</action>
```

### Critical Rules
1. âœ… Match response format to task complexity
2. ğŸ¯ Follow execution plan strictly
3. ğŸ’¾ Use variable content, not names
4. ğŸ“ Structure output in markdown
5. ğŸ”„ Revise plan on failures
6. âš¡ Complete task when all steps done
7. ğŸ” Validate results before completion
